<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClaimAI Pro - Frontend Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }
        .test-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 1rem;
            transition: all 0.2s ease;
        }
        .test-button:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        .test-button.success {
            background: #10b981;
        }
        .test-button.error {
            background: #ef4444;
        }
        .result {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            background: #f3f4f6;
            border-left: 4px solid #3b82f6;
        }
        .result.success {
            background: #d1fae5;
            border-left-color: #10b981;
        }
        .result.error {
            background: #fee2e2;
            border-left-color: #ef4444;
        }
        .demo-data {
            background: #f9fafb;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ ClaimAI Pro - Frontend Test Suite</h1>
            <p>Test the complete ClaimAI Pro application functionality</p>
        </div>

        <div class="test-section">
            <h2>üîß Backend Connection Tests</h2>
            <button class="test-button" onclick="testBackendHealth()">Test Backend Health</button>
            <button class="test-button" onclick="testAPIEndpoints()">Test All API Endpoints</button>
            <button class="test-button" onclick="testAIDemo()">Test AI Demo</button>
            <div id="backend-results"></div>
        </div>

        <div class="test-section">
            <h2>üìä Dashboard Data Tests</h2>
            <button class="test-button" onclick="testDashboardStats()">Test Dashboard Stats</button>
            <button class="test-button" onclick="testProcessingMetrics()">Test Processing Metrics</button>
            <button class="test-button" onclick="testRecentClaims()">Test Recent Claims</button>
            <div id="dashboard-results"></div>
        </div>

        <div class="test-section">
            <h2>ü§ñ AI Processing Tests</h2>
            <button class="test-button" onclick="testAIProviders()">Test AI Providers</button>
            <button class="test-button" onclick="testFraudDetection()">Test Fraud Detection</button>
            <button class="test-button" onclick="testDocumentAnalysis()">Test Document Analysis</button>
            <div id="ai-results"></div>
        </div>

        <div class="test-section">
            <h2>üìã Demo Claims Data</h2>
            <button class="test-button" onclick="generateDemoClaims()">Generate Demo Claims</button>
            <button class="test-button" onclick="showDemoPresentation()">Show Demo Presentation</button>
            <div id="demo-results"></div>
        </div>

        <div class="test-section">
            <h2>üéØ Quick Demo Links</h2>
            <button class="test-button" onclick="window.open('http://localhost:8000/docs', '_blank')">Open API Documentation</button>
            <button class="test-button" onclick="window.open('http://localhost:8000/api/ai/demo', '_blank')">Open AI Demo API</button>
            <button class="test-button" onclick="window.open('http://localhost:8000/api/dashboard/stats', '_blank')">Open Dashboard Stats</button>
            <button class="test-button" onclick="window.open('http://localhost:8080', '_blank')">Open Main Dashboard</button>
        </div>
    </div>

    <script>
        const API_BASE_URL = 'http://localhost:8000';

        async function makeRequest(endpoint, method = 'GET', data = null) {
            try {
                const options = {
                    method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                };
                if (data) {
                    options.body = JSON.stringify(data);
                }
                
                const response = await fetch(`${API_BASE_URL}${endpoint}`, options);
                const result = await response.json();
                return { success: response.ok, data: result, status: response.status };
            } catch (error) {
                return { success: false, error: error.message };
            }
        }

        function showResult(containerId, message, isSuccess = true) {
            const container = document.getElementById(containerId);
            const resultDiv = document.createElement('div');
            resultDiv.className = `result ${isSuccess ? 'success' : 'error'}`;
            resultDiv.innerHTML = `<strong>${isSuccess ? '‚úÖ' : '‚ùå'}</strong> ${message}`;
            container.appendChild(resultDiv);
        }

        function showData(containerId, title, data) {
            const container = document.getElementById(containerId);
            const resultDiv = document.createElement('div');
            resultDiv.className = 'result';
            resultDiv.innerHTML = `
                <strong>üìä ${title}</strong>
                <div class="demo-data">${JSON.stringify(data, null, 2)}</div>
            `;
            container.appendChild(resultDiv);
        }

        async function testBackendHealth() {
            const result = await makeRequest('/health');
            if (result.success) {
                showResult('backend-results', 'Backend is healthy and running!', true);
                showData('backend-results', 'Health Check Data', result.data);
            } else {
                showResult('backend-results', `Backend health check failed: ${result.error || result.data}`, false);
            }
        }

        async function testAPIEndpoints() {
            const endpoints = [
                '/',
                '/health',
                '/api/dashboard/stats',
                '/api/dashboard/metrics',
                '/api/claims/',
                '/api/ai/demo',
                '/api/ai/health',
                '/api/ai/providers'
            ];

            let successCount = 0;
            let totalCount = endpoints.length;

            for (const endpoint of endpoints) {
                const result = await makeRequest(endpoint);
                if (result.success) {
                    successCount++;
                    showResult('backend-results', `${endpoint}: OK`, true);
                } else {
                    showResult('backend-results', `${endpoint}: Failed`, false);
                }
            }

            showResult('backend-results', `API Endpoints Test: ${successCount}/${totalCount} passed`, successCount === totalCount);
        }

        async function testAIDemo() {
            const result = await makeRequest('/api/ai/demo');
            if (result.success) {
                showResult('ai-results', 'AI Demo endpoint working!', true);
                showData('ai-results', 'AI Demo Data', result.data);
            } else {
                showResult('ai-results', `AI Demo failed: ${result.error || result.data}`, false);
            }
        }

        async function testDashboardStats() {
            const result = await makeRequest('/api/dashboard/stats');
            if (result.success) {
                showResult('dashboard-results', 'Dashboard stats loaded successfully!', true);
                showData('dashboard-results', 'Dashboard Statistics', result.data);
            } else {
                showResult('dashboard-results', `Dashboard stats failed: ${result.error || result.data}`, false);
            }
        }

        async function testProcessingMetrics() {
            const result = await makeRequest('/api/dashboard/metrics');
            if (result.success) {
                showResult('dashboard-results', 'Processing metrics loaded successfully!', true);
                showData('dashboard-results', 'Processing Metrics', result.data);
            } else {
                showResult('dashboard-results', `Processing metrics failed: ${result.error || result.data}`, false);
            }
        }

        async function testRecentClaims() {
            const result = await makeRequest('/api/dashboard/recent-claims');
            if (result.success) {
                showResult('dashboard-results', 'Recent claims loaded successfully!', true);
                showData('dashboard-results', 'Recent Claims', result.data);
            } else {
                showResult('dashboard-results', `Recent claims failed: ${result.error || result.data}`, false);
            }
        }

        async function testAIProviders() {
            const result = await makeRequest('/api/ai/providers');
            if (result.success) {
                showResult('ai-results', 'AI providers loaded successfully!', true);
                showData('ai-results', 'AI Providers', result.data);
            } else {
                showResult('ai-results', `AI providers failed: ${result.error || result.data}`, false);
            }
        }

        async function testFraudDetection() {
            const testData = {
                claim_id: "test-001",
                claim_data: {
                    claimant_name: "Test User",
                    claim_amount: 5000,
                    incident_type: "Test Incident"
                }
            };

            const result = await makeRequest('/api/ai/fraud-detection', 'POST', testData);
            if (result.success) {
                showResult('ai-results', 'Fraud detection test successful!', true);
                showData('ai-results', 'Fraud Detection Result', result.data);
            } else {
                showResult('ai-results', `Fraud detection failed: ${result.error || result.data}`, false);
            }
        }

        async function testDocumentAnalysis() {
            const testData = {
                claim_id: "test-001",
                document_text: "Sample claim document for testing AI analysis",
                document_type: "claim"
            };

            const result = await makeRequest('/api/ai/analyze', 'POST', testData);
            if (result.success) {
                showResult('ai-results', 'Document analysis test successful!', true);
                showData('ai-results', 'Document Analysis Result', result.data);
            } else {
                showResult('ai-results', `Document analysis failed: ${result.error || result.data}`, false);
            }
        }

        function generateDemoClaims() {
            const demoClaims = [
                {
                    id: "claim-001",
                    claimant_name: "John Smith",
                    policy_number: "POL-2024-001234",
                    claim_amount: 2500.00,
                    incident_type: "Vehicle Collision",
                    status: "approved",
                    processing_time: "2.3 seconds",
                    ai_confidence: 0.92
                },
                {
                    id: "claim-002",
                    claimant_name: "Jane Doe",
                    policy_number: "POL-2024-001235",
                    claim_amount: 1500.00,
                    incident_type: "Property Damage",
                    status: "under_review",
                    processing_time: "1.8 seconds",
                    ai_confidence: 0.89
                },
                {
                    id: "claim-003",
                    claimant_name: "Mike Johnson",
                    policy_number: "POL-2024-001236",
                    claim_amount: 5000.00,
                    incident_type: "Medical Emergency",
                    status: "rejected",
                    processing_time: "3.1 seconds",
                    ai_confidence: 0.95
                }
            ];

            showResult('demo-results', 'Demo claims generated successfully!', true);
            showData('demo-results', 'Demo Claims Data', demoClaims);
        }

        function showDemoPresentation() {
            const presentationData = {
                title: "ClaimAI Pro - AI-Powered Insurance Claims Processing",
                key_metrics: {
                    processing_speed: "91% faster than traditional methods",
                    accuracy: "95% AI accuracy rate",
                    fraud_detection: "94% fraud detection rate",
                    cost_savings: "$2.1M+ annual savings per insurer"
                },
                demo_scenarios: [
                    "Standard Auto Claim - $2,500 - Approved in 2.3 seconds",
                    "High-Value Medical Claim - $5,000 - Rejected (Fraud Risk) in 3.1 seconds",
                    "Property Damage Claim - $1,500 - Under Review in 1.8 seconds"
                ]
            };

            showResult('demo-results', 'Demo presentation data ready!', true);
            showData('demo-results', 'Demo Presentation Data', presentationData);
        }

        // Auto-test on page load
        window.addEventListener('load', function() {
            showResult('backend-results', 'Frontend test page loaded. Click buttons to test functionality.', true);
        });
    </script>
</body>
</html>
